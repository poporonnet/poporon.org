---
import Layout from '../layouts/Layout.astro';
import BlogCard from '../components/blog/BlogCard.astro';
import { getCollection } from 'astro:content';

const posts = await getCollection('blog');
---

<Layout title="Blog | Poporon Network" description="Poporon Networkのメンバーによるブログ">
  <div class="my-4 w-full md:max-w-5/6">
    <p class="my-8 font-sans text-xl font-bold md:text-2xl">ブログ</p>

    <div class="mx-auto grid grid-cols-1 gap-8 sm:grid-cols-2">
      {
        posts.map((post) => (
          <BlogCard
            authorName={post.data.author.id}
            authorIconUrl={`https://github.com/${post.data.author.id}.png`}
            createdAt={post.data.createdAt.toLocaleDateString('ja-JP', {
              year: 'numeric',
              month: 'short',
              day: 'numeric',
            })}
            coverImageUrl={post.data.cover}
            tags={post.data.tags}
            title={post.data.title}
            slug={post.id}
          />
        ))
      }
    </div>
  </div>
</Layout>
